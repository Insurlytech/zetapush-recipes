zms_test test_addToMissedCall {
	
	// SETUP
	zms_test_setup {
		zms_test_user source = auth({});
		zms_test_user destinataire = auth({});
				
		// Create a group and add members on it
		sudo zpRecipeUtils::GLOBAL_OWNER call zpRecipeGroup::createGroup({id: "idGroup", name: "myGroup"});
		sudo zpRecipeUtils::GLOBAL_OWNER call zpRecipeGroup::addGroupMember({ id: "idGroup", member: destinataire.userKey});
		sudo zpRecipeUtils::GLOBAL_OWNER call zpRecipeGroup::addGroupMember({ id: "idGroup", member: source.userKey});
		
		// Get the group
		var group = sudo zpRecipeUtils::GLOBAL_OWNER await zpRecipeGroup::getGroup({ id: 'idGroup'});
	}
	
	// HANDLER
	zms_add_handler(destinataire, addToMissedCall, (response,errors) => {
		info(addToMissedCall.name, response);
		zms_test_success;
	});
	
	// CALL
	sudo source call addToMissedCall({groupId : group.result.group.resource, callId : 'CALL_ID'});
}