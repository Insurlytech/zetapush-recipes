/**
 * Update user profile
 */
macroscript updateUser(
	@NotNull string login,
	@AuthMandatoryFields map fields	
) {
	var profile = { login };
	profile += fields;
	/** Get user infos*/
	await core_user__updateUserByService({
		profile,
		zpService: zpServiceSimpleAuth
	});
	/** Get updated user */
	const response = await core_user__getUserByLoginAndService({
		login,
		zpService: zpServiceSimpleAuth
	});
} broadcast response on channel __selfName
