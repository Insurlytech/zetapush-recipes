macroscript resetUserPassword(
	string userKey,
	@NotNull string template
) {
	var response = null;

	/** Get user by login */
	response = call getUser({ userKey }) hardFail;
	/** Destructure response properties */
	var user = response.result.user;

	/** Reset user password */
	response = call resetUserPasswordByService({
		template,
		user,
		zpService: zpServiceSimpleAuth
	});

} broadcast { user } on channel __selfName
