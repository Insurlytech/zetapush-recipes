macroscript resetUserPasswordByLogin(
	@NotNull string login,
	@NotNull string template
) {
	var response = null;

	/** Get user by login */
	response = call getUserByLogin({ login }) hardFail;
	/** Destructure response properties */
	var user = response.result.user;

	/** Reset user password */
	response = call resetUserPasswordByService({
		template,
		user,
		zpService: zpServiceSimpleAuth
	}) hardFail;

} broadcast { user } on channel __selfName
