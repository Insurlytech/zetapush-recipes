/**
 *
 */
macroscript core_conversation__setConversationPermissionsByService(
	@ValidConversationId string id,
	@NotNull service<groups> zpService
) {
	/** Grant list and push to the group for the stack */
	zpService.mgrant({
		actions: [Verb_gda_get, Verb_gda_getCells, Verb_gda_inc, Verb_gda_list, Verb_gda_put, Verb_gda_puts, Verb_gda_range],
		group: id,
		resource: str:join(':', zpServiceStack, __userKey, id)
	});
	/** Grant grant to the group for the stack */
	zpService.mgrant({
		actions: ['GRANT'],
		group: id,
		resource: str:join(':', __userKey, id)
	});
	var path = CONVERSATION_ATTACHMENTS_PATH + id;
	/** Grant grant to the group for the stack */
	zpService.mgrant({
		actions: [Verb_zpfs_hdfs_newUploadUrl],
		group: id,
		resource: str:join(':', zpServiceFileSystem, __userKey, path)
	});
	/** Grant grant to the group for the stack */
	zpService.grant({
		action: Verb_zpfs_hdfs_newFile,
		group: id,
		resource: '*'
	});
} on channel __selfName
