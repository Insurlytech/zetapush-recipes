/**
 * Get conversation message
 */
macroscript getConversationMessages(
	@NotNull string id,
	@NotNull string owner,
	object pagination = null
) {
	var stack = id;
	
	/** List stored messages */
	var response = sudo owner call zpRecipeUtils::paginatedStackList({
		stackService: zpServiceStack,
		stack: stack,
		owner: owner,
		page: pagination
	}) hardFail;
	response = response.result;
	/** Destructure response properties */
	var messages = response.result.content;
	var page = response.result.page;

} broadcast { messages, page } on channel __selfName

