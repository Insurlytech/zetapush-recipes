macroscript listConversationByMember(
	@NotNull string userKey,
	map pagination = { pageSize: 50, pageNumber: 0 }
) {
	/** List groups user is a part of */
	var groups = sudo userKey zpServiceGroups.myGroups();
	var conversations = [];
	/** List OneToOne group based conversations */
	for group in groups {
		var { group: id, owner } = group;
		var { result: conversation } = call core_conversation__getConversation({ id, owner, pagination }) hardFail;
		/** Add conversation to list */
		conversations += conversation;
	}
} broadcast { conversations } on channel __selfName
