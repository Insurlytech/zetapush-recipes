macroscript listConversationHistory(
) {
	var { result: { content } } = zpServiceGda.list({
		table: HISTORY_TABLE
	});
	var conversations = [];
	for item in content {
		var id = item.__key;
		var owner = item.owner;
		var messages = [item.latest];
		var details = {
			id,
			owner: item.owner,
			createdAt: item.createAt,
			name: item.name
		};
		// TODO Avoid sudo with a correct grants policy
		var { result: { group } } = sudo owner call zpRecipeGroup::core_group__getGroupByService({ id, zpService: zpServiceGroups }) hardFail;
		/** Add conversation to list */
		conversations += {
			details,
			group,
			messages
		};
		
	}
} broadcast { conversations } on channel __selfName