zms_test test_core_conversation__create {
	import zms_test_setup test_core_conversation__setup;

	zms_add_handler(anonymous, getUserConversationList, (result, errors) => {
		info('getUserConversationList', result, errors);

		zms_test_success;
	});
	
	zms_add_handler(anonymous, getConversationMessageList, (result, errors) => {
		info('getConversationMessageList', result, errors);

		sudo anonymous call getUserConversationList();
	});
	
	zms_add_handler(anonymous, addConversationMessage, (result, errors) => {
		info('addConversationMessage', result, errors);

		sudo anonymous call getConversationMessageList({
			room: result.room
		});
	});
	
	zms_add_handler(anonymous, createConversation, (result, errors) => {
		info('createConversation', result, errors);

		sudo anonymous call addConversationMessage({
			room: result.room,
			type: MESSAGE_TYPE_MARKUP,
			value : {
				text: 'Hello'
			},
			metadata: {
				yo: 'bitch'
			}
		});
	});

/*
id    = p1h12sp962wmjsq
key   = p1h12sp962wmjsq 20170316142340547 p1q

start = p1h12sp962wmjsq 90000000000000000 000
stop  = p1h12sp962wmjsq 00000000000000000 000
*/

	sudo anonymous call createConversation({
		name: 'Conversation',
		members: []
	});
}
