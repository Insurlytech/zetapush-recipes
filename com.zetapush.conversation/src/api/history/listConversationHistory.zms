macroscript listConversationHistory(
) {
	var response = zpServiceGda.list({
		table: HISTORY_TABLE
	});
	var content = response.result.content;
	var conversations = [];
	for item in content {
		var id = item.__key;
		var owner = item.owner;
		var messages = [item.latest];
		var details = {
			id,
			owner: item.owner,
			createdAt: item.createAt,
			name: item.name
		};
		// TODO Avoid sudo with a correct grants policy
		response = sudo owner call zpRecipeGroup::getGroupByService({ id, zpService: zpServiceGroups }) hardFail;
		/** Destructure response properties */
		var group = response.result.group;
		/** Add conversation to list */
		conversations += {
			details,
			group,
			messages
		};
		
	}
} broadcast { conversations } on channel __selfName